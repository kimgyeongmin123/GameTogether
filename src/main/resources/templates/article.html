<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Article</title>

    <!--    Bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

</head>
<body>

<header>
    <h1>Mango (✌’ω’)✌</h1>
    <h5>망고의 게시판에 오신 것을 환영합니다.</h5>
</header>

<main>
    <div class="card">
        <input type="hidden" id="article-id" th:value="${article.id}">
        <div class="card-header" th:text="${article.title}">
            ArticleTitle
        </div>
        <div class="card-body">
            <h5 class="card-title" th:text="${article.content}">ArticleContent</h5>
            <p class="card-text" th:text="|게시한 날짜 : ${#temporals.format(article.createdAt, 'yyyy-MM-dd HH:mm')}|">ArticleContent</p>
            <button type="button" id="modify-btn" th:onclick="|location.href='@{/new-article?id={articleId}(articleId=${article.id})}'|" class="btn btn-primary">수정</button>
            <button type="button" id="delete-btn" class="btn btn-primary">삭제</button>
        </div>
    </div>
</main>

<!--<script src="/js/article.js"></script>-->
<script>
    const deleteButton = document.getElementById('delete-btn');

if (deleteButton){
    deleteButton.addEventListener('click', event => {
        let id = document.getElementById('article-id').value;
        fetch(`/api/articles/${id}`, {
            method: 'DELETE'
        })
        .then(() => {
            alert('삭제가 완료되었습니다.');
            location.replace('/articles');
        });
    });
}
</script>
</body>
</html>